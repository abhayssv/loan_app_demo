(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"39A7":function(t,e){t.exports='<header class="section-header">\r\n  <div class="tbl">\r\n    <div class="tbl-row">\r\n      <div class="tbl-cell">\r\n        <h3>Location Restriction</h3>\r\n        <ol class="breadcrumb breadcrumb-simple">\r\n          <li><a [routerLink]="[\'/\']">Home</a></li>\r\n          <li class="active">Location Restriction</li>\r\n        </ol>\r\n        <div class="add-button pull-right">\r\n          <button class="btn btn-primary plus-popup mt-2 m_popup" (click)="flatPop(fpopup,data)">Add Location Restriction</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</header>\r\n\x3c!-- Main Content --\x3e\r\n<section class="box-typical box-typical-padding">\r\n  <table id="lislimits" class="display table table-bordered" cellspacing="0" width="100%">\r\n    <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>State</th>\r\n        <th>City</th> \r\n        <th>Action</th> \r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let loc_restrict of locationrestrictions" [attr.id]="loc_restrict.id"> \r\n        <td>\r\n          {{ loc_restrict.id }}\r\n        </td> \r\n        <td>\r\n          {{ loc_restrict.state }}\r\n        </td>\r\n        <td *ngIf="loc_restrict.city">\r\n          {{ loc_restrict.city }}\r\n        </td>   \r\n        <td *ngIf="!loc_restrict.city">\r\n          Full Banned\r\n        </td>  \r\n        <td class="text-center">\r\n          \x3c!-- <a [routerLink]="[\'/app_user_limit/view/\' + limit.id]" class="btn btn-inline btn-primary btn-sm" title="View User Limit"><i class="fa fa-search"></i></a>  --\x3e\r\n          \r\n          \x3c!-- <a [routerLink]="[\'/app_user_limit/edit/\' + limit.id]" class="btn btn-inline btn-primary btn-sm" title="Edit User Limit"><i class="fa fa-pencil"></i></a> --\x3e\r\n           \r\n          <span class="btn btn-inline btn-danger btn-sm" title="Delete User Limit" (click)="delete1(loc_restrict.id)"><i class="fa fa-trash"></i></span>\r\n            \r\n        </td> \r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</section>\r\n\x3c!-- Flat modal Popup --\x3e\r\n<ng-template #fpopup let-modal>\r\n  <div class="modal-header modal-copy-header">\r\n     <h5 class="headerTitle m_header">Add Location Restriction</h5>\r\n     <button type="button" class="close" aria-label="Close" (click)="modal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n     </button>\r\n  </div>\r\n  <div class="modal-body">\r\n     <div class="config-popup">\r\n       <form name="form" (ngSubmit)="f.form.valid && saveLocRestriction(f.value)" #f="ngForm" novalidate>\r\n         <div class="col-sm-12">\r\n           <div class="row">\r\n              <div class="col-md-12">  \r\n                <fieldset class="form-group">\r\n                  <label class="semibold form-label" for="email">Country </label>\r\n                  <span class="form-control maxlength-simple">India</span>\r\n                </fieldset> \r\n                <div class="form-group" [ngClass]="{\'has-error\': f.submitted && !state.valid}"> \r\n                  <label for="active" class="required semibold form-label">State</label>\r\n                  <select class="form-control" name="state" [(ngModel)]="loc_restriction.state" #state="ngModel" required (change)="onChangeCity($event.target.value)">\r\n                      <option disabled [ngValue]="null">Select-State</option>\r\n                      <option *ngFor="let stateList of stateLists" [ngValue]="stateList.state_name +\':\'+ stateList.state_id">{{stateList.state_name}}</option>\r\n                  </select>\r\n                  <div *ngIf="f.submitted && !state.valid" class="help-block">Please select a State</div> \r\n                </div>\r\n                <div class="form-group" [ngClass]="{\'has-error\': f.submitted && !city.valid}"> \r\n                  <label for="active" class="required semibold form-label">City</label>\r\n                  <select class="form-control" name="city" [(ngModel)]="loc_restriction.city" #city="ngModel">\r\n                      <option disabled [ngValue]="null">Select-City</option>\r\n                      <option *ngFor="let cityList of cityLists" [ngValue]="cityList.city_name">{{cityList.city_name}}</option>\r\n                  </select>\r\n                  <div *ngIf="f.submitted && !city.valid" class="help-block">Please select a State</div> \r\n                </div>\r\n              </div> \r\n           </div> \r\n           <div class="row">\r\n             <div class="col-md-12"> \r\n                <button class="btn btn-primary mt-2">Submit</button>\r\n             </div> \r\n           </div> \r\n         </div> \r\n       </form> \r\n     <div>  \r\n  </div>  \r\n </div>\r\n</div>\r\n</ng-template>'},Ydk0:function(t,e,i){"use strict";i.r(e);var s=i("mrSG"),r=i("8Y7J"),n=i("SVse"),o=i("s7LF"),a=i("iInd"),c=i("IheW"),l=i("LRne"),d=i("vkgz"),p=i("JIr8"),h=i("AytR"),b=i("3AtW");let m=class{constructor(t,e){this.http=t,this.alertService=e,this.requestUrl=h.a.requestUrl+"/api/user_limit",this.httpOptions={headers:new c.d({"content-Type":"application/json;charset=UTF-8"})}}getLocationRestrictions(){return this.http.get(h.a.requestUrl+"/api/permission/location/restriction").pipe(Object(d.a)(t=>{this.handleResponse(t)}),Object(p.a)(this.handleError("LocationRestriction")))}getStateList(){return this.http.get(h.a.requestUrl+"/api/permission/state/get_state_list").pipe(Object(d.a)(t=>{this.handleResponse(t)}),Object(p.a)(this.handleError("LocationRestriction")))}getCityList(t){return console.log("StateID",t),this.http.get(h.a.requestUrl+"/api/permission/city/get_city_list/"+t,this.httpOptions).pipe(Object(d.a)(t=>{this.handleResponse(t)}),Object(p.a)(this.handleError("LocationRestriction")))}saveLocationRestriction(t){return this.http.post(h.a.requestUrl+"/api/permission/save/location_restriction/",t,this.httpOptions).pipe(Object(d.a)(t=>{this.handleResponse(t)}),Object(p.a)(this.handleError("LocationRestriction")))}deleteLocationRestriction(t){return this.http.post(h.a.requestUrl+"/api/permission/delete/location_restriction/",{id:t},this.httpOptions).pipe(Object(d.a)(t=>{this.handleResponse(t)}),Object(p.a)(this.handleError("LocationRestriction")))}handleResponse(t){return t.error?this.alertService.warn("Failed: "+t.message):this.alertService.success("Success:"+t.message),t}handleError(t="operation",e){return i=>(this.alertService.error(`${t} failed: ${i.message}`),Object(l.a)(e))}};m.ctorParameters=()=>[{type:c.b},{type:b.a}],m=s.a([Object(r.C)()],m);var u=i("EApP"),v=i("cUpR"),g=i("G0yt");let y=class{constructor(t,e,i,s,r,n){this.route=t,this.router=e,this.locationrestrictionService=i,this.toastr=s,this.modalService=r,this.titleService=n,this.loc_restriction={state:"",city:""},this.titleService.setTitle("List User Location Restriction")}ngOnInit(){let t=this,e=this.route.snapshot.data.locationrestrictions;e&&(t.locationrestrictions=e.data,console.log("11111111",t.locationrestrictions)),this.locationrestrictionService.getStateList().subscribe(t=>{t&&(this.stateLists=t.data)}),$((function(){$("#listlocationrestrictions").DataTable({responsive:!0,order:[]})}))}flatPop(t,e){this.modalService.open(t,{backdropClass:"dark-modal",centered:!0})}onChangeCity(t){const e=t.replace(/\:.*/,"");t?this.locationrestrictionService.getCityList(e).subscribe(t=>{this.cityLists=t.data}):this.cityLists=null}saveLocRestriction(t){const e={state:t.state.replace(/\:.*/,""),city:t.city};this.locationrestrictionService.saveLocationRestriction(e).subscribe(t=>{console.log(t.status_code),202==t.status_code?this.toastr.error(t.message,"Error"):(this.toastr.success(t.message,"Success"),setInterval(()=>{window.location.reload()},3e3))},t=>{console.log(t)})}delete1(t){var e=[];confirm("Do you really want to delete this locationrestriction")&&this.locationrestrictionService.deleteLocationRestriction(t).subscribe(i=>{this.toastr.success(i.message,"Success"),i.error||(e=this.locationrestrictions,this.locationrestrictions=e.filter(e=>e.id!==t))})}};y.ctorParameters=()=>[{type:a.a},{type:a.f},{type:m},{type:u.b},{type:g.a},{type:v.c}],y=s.a([Object(r.n)({selector:"list-location-restriction",template:i("39A7")})],y);let f=class{constructor(t){this.locationRestrictionService=t}resolve(){return this.locationRestrictionService.getLocationRestrictions()}};f.ctorParameters=()=>[{type:m}],f=s.a([Object(r.C)()],f);const L=[{path:"",component:y,resolve:{locationrestrictions:f}}];let S=class{};S=s.a([Object(r.K)({imports:[a.g.forChild(L)],exports:[a.g]})],S);var _=i("Q6Ar");i.d(e,"LocationRestrictionModule",(function(){return R}));let R=class{};R=s.a([Object(r.K)({imports:[n.b,o.a,S,_.a],providers:[m,f],declarations:[y]})],R)}}]);