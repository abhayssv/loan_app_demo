(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"39A7":function(t,e){t.exports='<header class="section-header">\r\n  <div class="tbl">\r\n    <div class="tbl-row">\r\n      <div class="tbl-cell">\r\n        <h3>Location Restriction</h3>\r\n        <ol class="breadcrumb breadcrumb-simple">\r\n          <li><a [routerLink]="[\'/\']">Home</a></li>\r\n          <li class="active">Location Restriction</li>\r\n        </ol>\r\n        <div class="add-button pull-right">\r\n          <button class="btn btn-primary plus-popup mt-2 m_popup" (click)="flatPop(fpopup,data)">Add Location Restriction</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</header>\r\n\x3c!-- Main Content --\x3e\r\n<section class="box-typical box-typical-padding">\r\n  <table id="lislimits" class="display table table-bordered" cellspacing="0" width="100%">\r\n    <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>State</th>\r\n        <th>City</th> \r\n        <th>Action</th> \r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor="let loc_restrict of locationrestrictions" [attr.id]="loc_restrict.id"> \r\n        <td>\r\n          {{ loc_restrict.id }}\r\n        </td> \r\n        <td>\r\n          {{ loc_restrict.state }}\r\n        </td>\r\n        <td *ngIf="loc_restrict.city">\r\n          {{ loc_restrict.city }}\r\n        </td>   \r\n        <td *ngIf="!loc_restrict.city">\r\n          Full Banned\r\n        </td>  \r\n        <td class="text-center">\r\n          \x3c!-- <a [routerLink]="[\'/app_user_limit/view/\' + limit.id]" class="btn btn-inline btn-primary btn-sm" title="View User Limit"><i class="fa fa-search"></i></a>  --\x3e\r\n          \r\n          \x3c!-- <a [routerLink]="[\'/app_user_limit/edit/\' + limit.id]" class="btn btn-inline btn-primary btn-sm" title="Edit User Limit"><i class="fa fa-pencil"></i></a> --\x3e\r\n           \r\n          <span class="btn btn-inline btn-danger btn-sm" title="Delete User Limit" (click)="delete1(loc_restrict.id)"><i class="fa fa-trash"></i></span>\r\n            \r\n        </td> \r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</section>\r\n\x3c!-- Flat modal Popup --\x3e\r\n<ng-template #fpopup let-modal>\r\n  <div class="modal-header modal-copy-header">\r\n     <h5 class="headerTitle m_header">Add Location Restriction</h5>\r\n     <button type="button" class="close" aria-label="Close" (click)="modal.dismiss(\'Cross click\')">\r\n        <span aria-hidden="true">&times;</span>\r\n     </button>\r\n  </div>\r\n  <div class="modal-body">\r\n     <div class="config-popup">\r\n       <form name="form" (ngSubmit)="f.form.valid && saveLocRestriction(f.value)" #f="ngForm" novalidate>\r\n         <div class="col-sm-12">\r\n           <div class="row">\r\n              <div class="col-md-12">  \r\n                <fieldset class="form-group">\r\n                  <label class="semibold form-label" for="email">Country </label>\r\n                  <span class="form-control maxlength-simple">India</span>\r\n                </fieldset> \r\n                <div class="form-group" [ngClass]="{\'has-error\': f.submitted && !state.valid}"> \r\n                  <label for="active" class="required semibold form-label">State</label>\r\n                  <select class="form-control" name="state" [(ngModel)]="loc_restriction.state" #state="ngModel" required (change)="onChangeCity($event.target.value)">\r\n                      <option disabled [ngValue]="null">Select-State</option>\r\n                      <option *ngFor="let stateList of stateLists" [ngValue]="stateList.state_name +\':\'+ stateList.state_id">{{stateList.state_name}}</option>\r\n                  </select>\r\n                  <div *ngIf="f.submitted && !state.valid" class="help-block">Please select a State</div> \r\n                </div>\r\n                <div class="form-group" [ngClass]="{\'has-error\': f.submitted && !city.valid}"> \r\n                  <label for="active" class="required semibold form-label">City</label>\r\n                  <select class="form-control" name="city" [(ngModel)]="loc_restriction.city" #city="ngModel">\r\n                      <option disabled [ngValue]="null">Select-City</option>\r\n                      <option *ngFor="let cityList of cityLists" [ngValue]="cityList.city_name">{{cityList.city_name}}</option>\r\n                  </select>\r\n                  <div *ngIf="f.submitted && !city.valid" class="help-block">Please select a State</div> \r\n                </div>\r\n              </div> \r\n           </div> \r\n           <div class="row">\r\n             <div class="col-md-12"> \r\n                <button class="btn btn-primary mt-2">Submit</button>\r\n             </div> \r\n           </div> \r\n         </div> \r\n       </form> \r\n     <div>  \r\n  </div>  \r\n </div>\r\n</div>\r\n</ng-template>'},Ydk0:function(t,e,i){"use strict";i.r(e);var r=i("mrSG"),n=i("CcnG"),s=i("Ip0R"),o=i("gIcY"),a=i("ZYCi"),c=i("t/Na"),l=i("F/XL"),d=i("xMyE"),p=i("9Z1F"),u=i("AytR"),h=i("3AtW"),b=function(){function t(t,e){this.http=t,this.alertService=e,this.requestUrl=u.a.requestUrl+"/api/user_limit",this.httpOptions={headers:new c.d({"content-Type":"application/json;charset=UTF-8"})}}return t.prototype.getLocationRestrictions=function(){var t=this;return this.http.get(u.a.requestUrl+"/api/permission/location/restriction").pipe(Object(d.a)((function(e){t.handleResponse(e)})),Object(p.a)(this.handleError("LocationRestriction")))},t.prototype.getStateList=function(){var t=this;return this.http.get(u.a.requestUrl+"/api/permission/state/get_state_list").pipe(Object(d.a)((function(e){t.handleResponse(e)})),Object(p.a)(this.handleError("LocationRestriction")))},t.prototype.getCityList=function(t){var e=this;return console.log("StateID",t),this.http.get(u.a.requestUrl+"/api/permission/city/get_city_list/"+t,this.httpOptions).pipe(Object(d.a)((function(t){e.handleResponse(t)})),Object(p.a)(this.handleError("LocationRestriction")))},t.prototype.saveLocationRestriction=function(t){var e=this;return this.http.post(u.a.requestUrl+"/api/permission/save/location_restriction/",t,this.httpOptions).pipe(Object(d.a)((function(t){e.handleResponse(t)})),Object(p.a)(this.handleError("LocationRestriction")))},t.prototype.deleteLocationRestriction=function(t){var e=this;return this.http.post(u.a.requestUrl+"/api/permission/delete/location_restriction/",{id:t},this.httpOptions).pipe(Object(d.a)((function(t){e.handleResponse(t)})),Object(p.a)(this.handleError("LocationRestriction")))},t.prototype.handleResponse=function(t){return t.error?this.alertService.warn("Failed: "+t.message):this.alertService.success("Success:"+t.message),t},t.prototype.handleError=function(t,e){var i=this;return void 0===t&&(t="operation"),function(r){return i.alertService.error(t+" failed: "+r.message),Object(l.a)(e)}},t.ctorParameters=function(){return[{type:c.b},{type:h.a}]},t=r.b([Object(n.C)()],t)}(),m=i("SZbH"),f=i("ZYjt"),v=i("4GxJ"),y=function(){function t(t,e,i,r,n,s){this.route=t,this.router=e,this.locationrestrictionService=i,this.toastr=r,this.modalService=n,this.titleService=s,this.loc_restriction={state:"",city:""},this.titleService.setTitle("List User Location Restriction")}return t.prototype.ngOnInit=function(){var t=this,e=this.route.snapshot.data.locationrestrictions;e&&(this.locationrestrictions=e.data,console.log("11111111",this.locationrestrictions)),this.locationrestrictionService.getStateList().subscribe((function(e){e&&(t.stateLists=e.data)})),$((function(){$("#listlocationrestrictions").DataTable({responsive:!0,order:[]})}))},t.prototype.flatPop=function(t,e){this.modalService.open(t,{backdropClass:"dark-modal",centered:!0})},t.prototype.onChangeCity=function(t){var e=this,i=t.replace(/\:.*/,"");t?this.locationrestrictionService.getCityList(i).subscribe((function(t){e.cityLists=t.data})):this.cityLists=null},t.prototype.saveLocRestriction=function(t){var e=this,i={state:t.state.replace(/\:.*/,""),city:t.city};this.locationrestrictionService.saveLocationRestriction(i).subscribe((function(t){console.log(t.status_code),202==t.status_code?e.toastr.error(t.message,"Error"):(e.toastr.success(t.message,"Success"),setInterval((function(){window.location.reload()}),3e3))}),(function(t){console.log(t)}))},t.prototype.delete1=function(t){var e=this,i=[];confirm("Do you really want to delete this locationrestriction")&&this.locationrestrictionService.deleteLocationRestriction(t).subscribe((function(r){e.toastr.success(r.message,"Success"),r.error||(i=e.locationrestrictions,e.locationrestrictions=i.filter((function(e){return e.id!==t})))}))},t.ctorParameters=function(){return[{type:a.a},{type:a.f},{type:b},{type:m.b},{type:v.a},{type:f.c}]},t=r.b([Object(n.n)({selector:"list-location-restriction",template:i("39A7")})],t)}(),g=function(){function t(t){this.locationRestrictionService=t}return t.prototype.resolve=function(){return this.locationRestrictionService.getLocationRestrictions()},t.ctorParameters=function(){return[{type:b}]},t=r.b([Object(n.C)()],t)}(),L=[{path:"",component:y,resolve:{locationrestrictions:g}}],S=function(){function t(){}return t=r.b([Object(n.K)({imports:[a.g.forChild(L)],exports:[a.g]})],t)}(),_=i("Q6Ar");i.d(e,"LocationRestrictionModule",(function(){return R}));var R=function(){function t(){}return t=r.b([Object(n.K)({imports:[s.b,o.a,S,_.a],providers:[b,g],declarations:[y]})],t)}()}}]);